--- android.toolchain.cmake	2018-12-04 14:30:11.366826315 +0000
+++ android.toolchain.cmake	2018-12-04 14:36:09.124348720 +0000
@@ -358,6 +358,7 @@
 set(ANDROID_COMPILER_FLAGS)
 set(ANDROID_COMPILER_FLAGS_CXX)
 set(ANDROID_COMPILER_FLAGS_DEBUG)
+set(ANDROID_COMPILER_FLAGS_RELWITHDEBINFO)
 set(ANDROID_COMPILER_FLAGS_RELEASE)
 set(ANDROID_LINKER_FLAGS)
 set(ANDROID_LINKER_FLAGS_EXE)
@@ -517,7 +518,6 @@
 
 # Generic flags.
 list(APPEND ANDROID_COMPILER_FLAGS
-  -g
   -DANDROID
   -ffunction-sections
   -funwind-tables
@@ -532,15 +532,17 @@
   -Wl,-z,nocopyreloc)
 
 # Debug and release flags.
-list(APPEND ANDROID_COMPILER_FLAGS_DEBUG -O0)
+list(APPEND ANDROID_COMPILER_FLAGS_DEBUG -g -O0)
 if(ANDROID_ABI MATCHES "^armeabi" AND ANDROID_ARM_MODE STREQUAL thumb)
   list(APPEND ANDROID_COMPILER_FLAGS_RELEASE -Oz)
 else()
   list(APPEND ANDROID_COMPILER_FLAGS_RELEASE -O2)
 endif()
 list(APPEND ANDROID_COMPILER_FLAGS_RELEASE -DNDEBUG)
+list(APPEND ANDROID_COMPILER_FLAGS_RELWITHDEBINFO -g ${ANDROID_COMPILER_FLAGS_RELEASE})
 if(ANDROID_TOOLCHAIN STREQUAL clang)
   list(APPEND ANDROID_COMPILER_FLAGS_DEBUG -fno-limit-debug-info)
+  list(APPEND ANDROID_COMPILER_FLAGS_RELWITHDEBINFO -fno-limit-debug-info)
 endif()
 
 # Toolchain and ABI specific flags.
@@ -702,6 +704,7 @@
 string(REPLACE ";" " " ANDROID_COMPILER_FLAGS         "${ANDROID_COMPILER_FLAGS}")
 string(REPLACE ";" " " ANDROID_COMPILER_FLAGS_CXX     "${ANDROID_COMPILER_FLAGS_CXX}")
 string(REPLACE ";" " " ANDROID_COMPILER_FLAGS_DEBUG   "${ANDROID_COMPILER_FLAGS_DEBUG}")
+string(REPLACE ";" " " ANDROID_COMPILER_FLAGS_RELWITHDEBINFO "${ANDROID_COMPILER_FLAGS_RELWITHDEBINFO}")
 string(REPLACE ";" " " ANDROID_COMPILER_FLAGS_RELEASE "${ANDROID_COMPILER_FLAGS_RELEASE}")
 string(REPLACE ";" " " ANDROID_LINKER_FLAGS           "${ANDROID_LINKER_FLAGS}")
 string(REPLACE ";" " " ANDROID_LINKER_FLAGS_EXE       "${ANDROID_LINKER_FLAGS_EXE}")
@@ -738,6 +741,12 @@
   CACHE STRING "Flags used by the compiler during debug builds.")
 set(CMAKE_ASM_FLAGS_DEBUG ""
   CACHE STRING "Flags used by the compiler during debug builds.")
+set(CMAKE_C_FLAGS_RELWITHDEBINFO ""
+  CACHE STRING "Flags used by the compiler during relwithdebinfo builds.")
+set(CMAKE_CXX_FLAGS_RELWITHDEBINFO ""
+  CACHE STRING "Flags used by the compiler during relwithdebinfo builds.")
+set(CMAKE_ASM_FLAGS_RELWITHDEBINFO ""
+  CACHE STRING "Flags used by the compiler during relwithdebinfo builds.")
 set(CMAKE_C_FLAGS_RELEASE ""
   CACHE STRING "Flags used by the compiler during release builds.")
 set(CMAKE_CXX_FLAGS_RELEASE ""
@@ -757,6 +766,9 @@
 set(CMAKE_C_FLAGS_DEBUG       "${ANDROID_COMPILER_FLAGS_DEBUG} ${CMAKE_C_FLAGS_DEBUG}")
 set(CMAKE_CXX_FLAGS_DEBUG     "${ANDROID_COMPILER_FLAGS_DEBUG} ${CMAKE_CXX_FLAGS_DEBUG}")
 set(CMAKE_ASM_FLAGS_DEBUG     "${ANDROID_COMPILER_FLAGS_DEBUG} ${CMAKE_ASM_FLAGS_DEBUG}")
+set(CMAKE_C_FLAGS_RELWITHDEBINFO   "${ANDROID_COMPILER_FLAGS_RELWITHDEBINFO} ${CMAKE_C_FLAGS_RELWITHDEBINFO}")
+set(CMAKE_CXX_FLAGS_RELWITHDEBINFO "${ANDROID_COMPILER_FLAGS_RELWITHDEBINFO} ${CMAKE_CXX_FLAGS_RELWITHDEBINFO}")
+set(CMAKE_ASM_FLAGS_RELWITHDEBINFO "${ANDROID_COMPILER_FLAGS_RELWITHDEBINFO} ${CMAKE_ASM_FLAGS_RELWITHDEBINFO}")
 set(CMAKE_C_FLAGS_RELEASE     "${ANDROID_COMPILER_FLAGS_RELEASE} ${CMAKE_C_FLAGS_RELEASE}")
 set(CMAKE_CXX_FLAGS_RELEASE   "${ANDROID_COMPILER_FLAGS_RELEASE} ${CMAKE_CXX_FLAGS_RELEASE}")
 set(CMAKE_ASM_FLAGS_RELEASE   "${ANDROID_COMPILER_FLAGS_RELEASE} ${CMAKE_ASM_FLAGS_RELEASE}")
